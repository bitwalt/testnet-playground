# Testnet Bitcoin-LN Playground 

The aim of this project is to create a development environment over the Lightning Network. 
In a microservices architecture, a Python client is provided in order to develop a Layer-3 distributed application.  
Some ideas could be: 
- P2P Video Streaming
- Crowdfunding application
- Decentralized social network
- E2E chat application
- Machine Learning API for distrubuted computing

Only **testnet** and **regtest** are supported.

The playground is based on a series of docker containers, orchestrated by a docker-compose file.
Each container is generated by a local Dockerfile that can be changed if needed. 

The setup in regtest enviroment is:
- A Bitcoin core node running in the backgroud, generating 
blocks and validating test transactions every
10 seconds.
- 3 Lightning nodes (Alice, Bob, Charlie) running in the background, connecting each other generating a LN network (Alice->Bob, Bob->Charlie). Each LN node will start receinvg satoshis from the node, Alice and Bob will create a channel with corresponding peers.
- A python client can generate a multi-hop transaction by sending sats from Alice to Charlie.


Tested on Raspberry Pi 4, Macbook Pro Intel Core, Macbook Air M1 

## Docker 
Install docker and docker-compose, skip if already installed 
```
chmod +x scripts/install_docker.sh
sudo ./scripts/install_docker.sh
```

## Modify environment variables
Define your specs in *config* file: 

 - Architecure: x86, ARM
 - Bitcoin Network: regtest
 - BitcoinCore version: 22.0
 - LND version: v0.14.3-beta
 

## Running all
This command will generate config files (env, bitcoin.conf, lnd.conf) and docker-compose file based on the settings you provided. 
Then build docker images and run all containers. 
```
    bash start.sh  
```

Connect to the bitcoin container where you can run **bitcoin-cli**
```
    make run-bitcoin
```
Connect to the lnd container where you can run **lncli**
```
    make run-lnd
```

Check docker-compose logs for Jupyter notebook token-url

### Running Bitcoin Core only
Read [bitcoin-testnet-box README.md](bitcoind/README.md) for more info/examples. 
```
    cd bitcoind
    make docker-build
    make docker-run
```

### Repository inspired and/or based on: 
- [Umbrel](https://github.com/getumbrel/umbrel)
- [example-lnd-rest-api](https://github.com/kadokko/example-lnd-rest-api)
- [bitcoin-testnet-box](https://github.com/freewil/bitcoin-testnet-box)
- [MasteringTheLightningNetwork docker](https://github.com/lnbook/lnbook/tree/develop/code/docker)

## TODO:

#### REGTEST
- [X] Create new bitcoin.conf and lnd.conf on start 
- [X]  Create multiple lnd nodes for regtest
- [X]  Connect 3 nodes on regtest to create a lightning network 
- [X]  Config file for fast configuration start-up -> gen new docker-compose.yml
- [X]  Make a multi-hop payment in jupyter notebook
- [ ]  Submarine swap on regtest using python 
- [ ]  Periodic payment on a regtest channel using python
- [ ]  Handle different LN implementatios: c-lightning (C), LNP-BP (Rust)
- [ ]  RGB Client-side-validation for smart contracts

#### TESTNET
- [ ]  Tor on testnet
- [ ]  Connect testnet node with N new peers
- [ ]  LN Multi-hop payment on testnet using mobile wallet


